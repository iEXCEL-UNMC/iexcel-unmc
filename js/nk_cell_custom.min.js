function actionSkfb(){window.Sketchfab||console.log("no Sketchfab library");var client,error=function error(){console.error("Sketchfab API error")},success=function success(api){api.start((function(){})),api.addEventListener("viewerready",(function(){api.getAnnotationList((function(err,annotations){err||console.log(annotations);var textDiv=document.getElementById("annotations-sync"),myMaterials;function setToNormal(arrMat){for(var i=0;i<arrMat.length;i++){var m=arrMat[i];m.channels.EmitColor.enable=0,api.setMaterial(m)}}function highlightMat(m){m.channels.EmitColor.enable=1,m.channels.EmitColor.factor=1,m.channels.EmitColor.color=[.439,.96,.423],api.setMaterial(m)}var myMaterialsByName={};function isolateMat(m){for(var i=0;i<myMaterials.length;i++)myMaterials[i].channels.Opacity={enable:!0,factor:.1},api.setMaterial(myMaterials[i]);m.channels.Opacity={enable:!0,factor:1},api.setMaterial(m)}function hideMat(m){for(var i=0;i<myMaterials.length;i++)myMaterials[i].channels.Opacity={enable:!0,factor:0},api.setMaterial(m)}function unIsolate(){for(var i=0;i<myMaterials.length;i++)myMaterials[i].channels.Opacity={enable:!0,factor:1},api.setMaterial(myMaterials[i])}api.getMaterialList((function(err,materials){if(!err)for(var materialID in myMaterials=materials,materials){var material=materials[materialID],name=material.name;name||(name="noname_"+idxNodes++),myMaterialsByName[name]=material}})),api.setHighlightOptions({outlineWidth:5,outlineColor:[.09,.76,1],outlineDuration:2});var myNodesByNameFromMap2={};api.getNodeMap((function(err,nodes){if(!err)for(var instanceID in nodes){var node=nodes[instanceID],name=node.name;name||(name="noname_"+idxNodes++),myNodesByNameFromMap2[name]=node.instanceID}})),document.getElementById("nkCellCheckbox").addEventListener("click",(function(){var nkCellToHide=[myNodesByNameFromMap2.NK_Cell_LP],checkbox;if(1!=document.getElementById("nkCellCheckbox").checked)for(var i=0;i<nkCellToHide.length;i++)api.hide(nkCellToHide[i]);else for(var i=0;i<nkCellToHide.length;i++)api.show(nkCellToHide[i])})),document.getElementById("nucleusCheckbox").addEventListener("click",(function(){var nucleusToHide=[myNodesByNameFromMap2.NK_Cell_nucleus],checkbox;if(1!=document.getElementById("nucleusCheckbox").checked)for(var i=0;i<nucleusToHide.length;i++)api.hide(nucleusToHide[i]);else for(var i=0;i<nucleusToHide.length;i++)api.show(nucleusToHide[i])})),document.getElementById("azurophilicCheckbox").addEventListener("click",(function(){var azurophilicToHide=[myNodesByNameFromMap2.granules_azurophilic,myNodesByNameFromMap2.granules_azurophilic_ncl1_1,myNodesByNameFromMap2.granules_azurophilic_ncl1_2,myNodesByNameFromMap2.granules_azurophilic_ncl1_3,myNodesByNameFromMap2.granules_azurophilic_ncl1_4,myNodesByNameFromMap2.granules_azurophilic_ncl1_5,myNodesByNameFromMap2.granules_azurophilic_ncl1_6,myNodesByNameFromMap2.granules_azurophilic_ncl1_7,myNodesByNameFromMap2.granules_azurophilic_ncl1_8,myNodesByNameFromMap2.granules_azurophilic_ncl1_9,myNodesByNameFromMap2.granules_azurophilic_ncl1_10,myNodesByNameFromMap2.granules_azurophilic_ncl1_11,myNodesByNameFromMap2.granules_azurophilic_ncl1_12,myNodesByNameFromMap2.granules_azurophilic_ncl1_13,myNodesByNameFromMap2.granules_azurophilic_ncl1_14,myNodesByNameFromMap2.granules_azurophilic_ncl1_15,myNodesByNameFromMap2.granules_azurophilic_ncl1_16,myNodesByNameFromMap2.granules_azurophilic_ncl1_17,myNodesByNameFromMap2.granules_azurophilic_ncl1_18,myNodesByNameFromMap2.granules_azurophilic_ncl1_19,myNodesByNameFromMap2.granules_azurophilic_ncl1_20,myNodesByNameFromMap2.granules_azurophilic_ncl1_21,myNodesByNameFromMap2.granules_azurophilic_ncl1_22,myNodesByNameFromMap2.granules_azurophilic_ncl1_23,myNodesByNameFromMap2.granules_azurophilic_ncl1_24,myNodesByNameFromMap2.granules_azurophilic_ncl1_25,myNodesByNameFromMap2.granules_azurophilic_ncl1_26,myNodesByNameFromMap2.granules_azurophilic_ncl1_27,myNodesByNameFromMap2.granules_azurophilic_ncl1_28,myNodesByNameFromMap2.granules_azurophilic_ncl1_29,myNodesByNameFromMap2.granules_azurophilic_ncl1_30,myNodesByNameFromMap2.granules_azurophilic_ncl1_31,myNodesByNameFromMap2.granules_azurophilic_ncl1_32,myNodesByNameFromMap2.granules_azurophilic_ncl1_33,myNodesByNameFromMap2.granules_azurophilic_ncl1_34,myNodesByNameFromMap2.granules_azurophilic_ncl1_35,myNodesByNameFromMap2.granules_azurophilic_ncl1_36,myNodesByNameFromMap2.granules_azurophilic_ncl1_37,myNodesByNameFromMap2.granules_azurophilic_ncl1_38,myNodesByNameFromMap2.granules_azurophilic_ncl1_39,myNodesByNameFromMap2.granules_azurophilic_ncl1_40,myNodesByNameFromMap2.granules_azurophilic_ncl1_41,myNodesByNameFromMap2.granules_azurophilic_ncl1_42,myNodesByNameFromMap2.granules_azurophilic_ncl1_43,myNodesByNameFromMap2.granules_azurophilic_ncl1_44,myNodesByNameFromMap2.granules_azurophilic_ncl1_45,myNodesByNameFromMap2.granules_azurophilic_ncl1_46,myNodesByNameFromMap2.granules_azurophilic_ncl1_47,myNodesByNameFromMap2.granules_azurophilic_ncl1_48,myNodesByNameFromMap2.granules_azurophilic_ncl1_49,myNodesByNameFromMap2.granules_azurophilic_ncl1_50,myNodesByNameFromMap2.granules_azurophilic_ncl1_51,myNodesByNameFromMap2.granules_azurophilic_ncl1_52,myNodesByNameFromMap2.granules_azurophilic_ncl1_53,myNodesByNameFromMap2.granules_azurophilic_ncl1_54,myNodesByNameFromMap2.granules_azurophilic_ncl1_55,myNodesByNameFromMap2.granules_azurophilic_ncl1_56,myNodesByNameFromMap2.granules_azurophilic_ncl1_57,myNodesByNameFromMap2.granules_azurophilic_ncl1_58,myNodesByNameFromMap2.granules_azurophilic_ncl1_59,myNodesByNameFromMap2.granules_azurophilic_ncl1_60,myNodesByNameFromMap2.granules_azurophilic_ncl1_61,myNodesByNameFromMap2.granules_azurophilic_ncl1_62,myNodesByNameFromMap2.granules_azurophilic_ncl1_63,myNodesByNameFromMap2.granules_azurophilic_ncl1_64,myNodesByNameFromMap2.granules_azurophilic_ncl1_65,myNodesByNameFromMap2.granules_azurophilic_ncl1_66,myNodesByNameFromMap2.granules_azurophilic_ncl1_67,myNodesByNameFromMap2.granules_azurophilic_ncl1_68,myNodesByNameFromMap2.granules_azurophilic_ncl1_69,myNodesByNameFromMap2.granules_azurophilic_ncl1_70,myNodesByNameFromMap2.granules_azurophilic_ncl1_71,myNodesByNameFromMap2.granules_azurophilic_ncl1_72,myNodesByNameFromMap2.granules_azurophilic_ncl1_73,myNodesByNameFromMap2.granules_azurophilic_ncl1_74,myNodesByNameFromMap2.granules_azurophilic_ncl1_75,myNodesByNameFromMap2.granules_azurophilic_ncl1_76,myNodesByNameFromMap2.granules_azurophilic_ncl1_77,myNodesByNameFromMap2.granules_azurophilic_ncl1_78,myNodesByNameFromMap2.granules_azurophilic_ncl1_79,myNodesByNameFromMap2.granules_azurophilic_ncl1_80,myNodesByNameFromMap2.granules_azurophilic_ncl1_81,myNodesByNameFromMap2.granules_azurophilic_ncl1_82,myNodesByNameFromMap2.granules_azurophilic_ncl1_83,myNodesByNameFromMap2.granules_azurophilic_ncl1_84,myNodesByNameFromMap2.granules_azurophilic_ncl1_85,myNodesByNameFromMap2.granules_azurophilic_ncl1_86,myNodesByNameFromMap2.granules_azurophilic_ncl1_87,myNodesByNameFromMap2.granules_azurophilic_ncl1_88,myNodesByNameFromMap2.granules_azurophilic_ncl1_89,myNodesByNameFromMap2.granules_azurophilic_ncl1_90,myNodesByNameFromMap2.granules_azurophilic_ncl1_91,myNodesByNameFromMap2.granules_azurophilic_ncl1_92,myNodesByNameFromMap2.granules_azurophilic_ncl1_93,myNodesByNameFromMap2.granules_azurophilic_ncl1_94,myNodesByNameFromMap2.granules_azurophilic_ncl1_95,myNodesByNameFromMap2.granules_azurophilic_ncl1_96,myNodesByNameFromMap2.granules_azurophilic_ncl1_97,myNodesByNameFromMap2.granules_azurophilic_ncl1_98,myNodesByNameFromMap2.granules_azurophilic_ncl1_99,myNodesByNameFromMap2.granules_azurophilic_ncl1_100,myNodesByNameFromMap2.granules_azurophilic_ncl1_101,myNodesByNameFromMap2.granules_azurophilic_ncl1_102,myNodesByNameFromMap2.granules_azurophilic_ncl1_103,myNodesByNameFromMap2.granules_azurophilic_ncl1_104,myNodesByNameFromMap2.granules_azurophilic_ncl1_105,myNodesByNameFromMap2.granules_azurophilic_ncl1_106,myNodesByNameFromMap2.granules_azurophilic_ncl1_107,myNodesByNameFromMap2.granules_azurophilic_ncl1_108,myNodesByNameFromMap2.granules_azurophilic_ncl1_109,myNodesByNameFromMap2.granules_azurophilic_ncl1_110],checkbox;if(1!=document.getElementById("azurophilicCheckbox").checked){hideMat(myMaterialsByName.Granules_baso_sp_mat);for(var i=0;i<azurophilicToHide.length;i++)api.hide(azurophilicToHide[i])}else for(var i=0;i<azurophilicToHide.length;i++)api.show(azurophilicToHide[i])})),document.getElementById("granulesCheckbox").addEventListener("click",(function(){var granulesToHide=[myNodesByNameFromMap2.granules_largeCytoplasmic_0,myNodesByNameFromMap2.granules_largeCytoplasmic_1,myNodesByNameFromMap2.granules_largeCytoplasmic_2,myNodesByNameFromMap2.granules_largeCytoplasmic_3,myNodesByNameFromMap2.granules_largeCytoplasmic_4,myNodesByNameFromMap2.granules_largeCytoplasmic_5,myNodesByNameFromMap2.granules_largeCytoplasmic_6,myNodesByNameFromMap2.granules_largeCytoplasmic_7,myNodesByNameFromMap2.granules_largeCytoplasmic_8,myNodesByNameFromMap2.granules_largeCytoplasmic_9,myNodesByNameFromMap2.granules_largeCytoplasmic_10,myNodesByNameFromMap2.granules_largeCytoplasmic_11,myNodesByNameFromMap2.granules_largeCytoplasmic_12,myNodesByNameFromMap2.granules_largeCytoplasmic_13,myNodesByNameFromMap2.granules_largeCytoplasmic_14,myNodesByNameFromMap2.granules_largeCytoplasmic_15,myNodesByNameFromMap2.granules_largeCytoplasmic_16,myNodesByNameFromMap2.granules_largeCytoplasmic_17,myNodesByNameFromMap2.granules_largeCytoplasmic_18],checkbox;if(document.getElementById("granulesCheckbox").checked)for(var i=0;i<granulesToHide.length;i++)api.show(granulesToHide[i]);else for(var i=0;i<granulesToHide.length;i++)api.hide(granulesToHide[i])})),document.getElementById("annotationsCheckbox").addEventListener("click",(function(){var granulesToHide=[myNodesByNameFromMap2.nucleus_leader,myNodesByNameFromMap2.nucleus_plane,myNodesByNameFromMap2.azu_plane,myNodesByNameFromMap2.azu_leader,myNodesByNameFromMap2.PlaneLabel,myNodesByNameFromMap2.LineLeader],checkbox;if(document.getElementById("annotationsCheckbox").checked)for(var i=0;i<granulesToHide.length;i++)api.show(granulesToHide[i]);else for(var i=0;i<granulesToHide.length;i++)api.hide(granulesToHide[i])})),api.addEventListener("annotationSelect",(function(info){if(-1!==info){var materialHighlight=[myMaterialsByName.Granules_baso_sp_mat,myMaterialsByName.Granule_sec_mat,myMaterialsByName.Baso_nucleus_mat,myMaterialsByName.invis_vaginal_opening_mat,myMaterialsByName.l_Skenes_gland_mat,myMaterialsByName.l_vestibular_bulb_mat,myMaterialsByName.l_deeo_transverse_perineal_muscle_mat,myMaterialsByName.l_superfical_transverse_perineal_muscle_mat,myMaterialsByName.pudendalNerve_SG,myMaterialsByName.perinealNerve_SG,myMaterialsByName.l_puborectalis_muscle_mat,myMaterialsByName.l_pubococcygeus_muscle_mat,myMaterialsByName.l_ileococcygeus_muscle_mat,myMaterialsByName.l_coccygeus_muscle_mat,myMaterialsByName.l_tendinous_arch_of_levator_ani,myMaterialsByName.uterus_mat,myMaterialsByName.bladder_mat,myMaterialsByName.l_compressor_urethral_muscle_mat,myMaterialsByName.urethra_mat,myMaterialsByName.l_external_anal_sphincter_muscle_mat];console.log("annotationSelect",info,annotations[info]),textDiv.innerHTML=annotations[info].name+(annotations[info].content?annotations[info].content.rendered:""),api.highlightMaterial(materialHighlight[info])}else textDiv.innerHTML=""})),api.addEventListener("annotationFocus",(function(info){console.log("annotationFocus",info,annotations[info])})),api.addEventListener("annotationBlur",(function(info){console.log("annotationBlur",info,annotations[info])})),api.addEventListener("annotationMouseEnter",(function(info){console.log("annotationMouseEnter",info,annotations[info])})),api.addEventListener("annotationMouseLeave",(function(info){console.log("annotationMouseLeave",info,annotations[info])}))})),console.log("viewerready");var url=getNewPastilleURL("rgba(255,255,255,0.0)","black","black","none",0,50,512,256);api.setAnnotationsTexture(url,(function(){console.log("annotation pastilles changed")}))}))};new window.Sketchfab(version,iframe).init(uid,{success:success,error:error,autostart:1,preload:1,annotation_tooltip_visible:0,max_texture_size:800})}function initGui(){var controls,buttonsText='\n        <div id="annotations-sync"></div>\n       ';buttonsText+='<h1 id="a0"></h1>',buttonsText+='<h1 id="a1"></h1>',buttonsText+='<h1 id="a2"></h1>',document.getElementById("controls").innerHTML=buttonsText}function computePastilles(wCanvas,hCanvas,bgColor,bgBorderColor,fgColor,fgBorderColor,text,numHotspot,wPastille,hPastille){for(var wSize=wPastille/10,col=wCanvas/wSize,row=hCanvas/wSize,padding=2,w=wSize-2,cx,cy=.5*w,ty=cy+8,pastille="",num=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],i=0;i<row;i++){cx=.5*wSize;for(var k=0;k<col;k++){var letters=num[k+10*i],circle,textVG;pastille+='<circle cx="'.concat(cx,'"\n            cy="').concat(cy,'"\n            r="20"\n            fill="').concat(bgColor,'"\n            stroke="').concat(bgBorderColor,'"\n            stroke-width="2"/>')+'<text font-size="26"\n          stroke="'.concat(fgBorderColor,'"\n          fill="').concat(fgColor,'"\n          font-family="sans-serif"\n          text-anchor="middle"\n          alignment-baseline="baseline"\n          x="').concat(cx,'"\n          y="').concat(ty,'">').concat(letters,"</text>"),cx+=wSize}cy+=wSize,ty+=wSize}var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),svg64,b64Start,image64,textureOptions;return s.setAttribute("version","1.1"),s.setAttribute("baseProfile","full"),s.setAttribute("width",wPastille),s.setAttribute("height",hPastille),s.setAttribute("viewBox","0 0 ".concat(wPastille," ").concat(hPastille)),s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.innerHTML=pastille,{url:"data:image/svg+xml;base64,"+btoa(s.outerHTML),colNumber:col,padding:2,iconSize:w}}function getNewPastilleURL(bgColor,bgBorderColor,fgColor,fgBorderColor,text,numHotspot,w,h){var imageData;return imageData=computePastilles(w,h,bgColor,bgBorderColor,fgColor,fgBorderColor,text,numHotspot,w,h)}actionSkfb(),initGui();